popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t, 'GWH.png')
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="quantile",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="quantile",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t, 'GWHquantile.png')
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="jenks",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="jenks",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t, 'GWHjenks.png')
tm3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="quantile",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_legend(show=FALSE)
legend3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("percent",
style="quantile",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t3=tmap_arrange(tm3, legend3)
t3
tmap_save(t3, 'CO2quantile.png')
tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Blue Plaque Density") +
tm_legend(position = c("right", "bottom"))
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="jenks",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="jenks",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t1, 'GWHjenks.png')
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="quantile",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="quantile",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t1, 'GWHquantile.png')
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t1, 'GWH.png')
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t1, 'GWH.png')
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="quantile",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t1, 'GWHquan.png')
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="quantile",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="quantile",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t1, 'GWHquan.png')
tm1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="jenks",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Percentage") +
tm_legend(show=FALSE)
legend1 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumGWH",
palette="seq",
style="jenks",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumGWH"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t1=tmap_arrange(tm1, legend1)
t1
tmap_save(t1, 'GWHjenks.png')
tm2 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("percent",
style="quantile",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend2 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("percent",
style="quantile",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t2=tmap_arrange(tm2, legend2)
t2
tmap_save(t2, 'percentagequantile.png')
tm2 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("percent",
style="jenks",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend2 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("percent",
style="jenks",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t2=tmap_arrange(tm2, legend2)
t2
tmap_save(t2, 'percentagejenks.png')
tm2 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("percent",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_legend(show=FALSE)
legend2 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("percent",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "percent"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t2=tmap_arrange(tm2, legend2)
t2
tmap_save(t2, 'percentage.png')
tm3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="quantile",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_legend(show=FALSE)
legend3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="quantile",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t3=tmap_arrange(tm3, legend3)
t3
tmap_save(t3, 'CO2quantile.png')
tm3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="jenks",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_legend(show=FALSE)
legend3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="jenks",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t3=tmap_arrange(tm3, legend3)
t3
tmap_save(t3, 'CO2quantile.png')
tm3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="quantile",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_legend(show=FALSE)
legend3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="quantile",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t3=tmap_arrange(tm3, legend3)
t3
tmap_save(t3, 'CO2quantile.png')
tm3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="jenks",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_legend(show=FALSE)
legend3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
style="jenks",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t3=tmap_arrange(tm3, legend3)
t3
tmap_save(t3, 'CO2jenks.png')
tm3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
palette="PuBu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_legend(show=FALSE)
legend3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
palette="PuBu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t3=tmap_arrange(tm3, legend3)
t3
tmap_save(t3, 'CO2.png')
tm3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
palette="YlOrRd",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_legend(show=FALSE)
legend3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
palette="YlOrRd",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t3=tmap_arrange(tm3, legend3)
t3
tmap_save(t3, 'CO2NEW.png')
tm3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
palette="BuPu",
midpoint=NA,
border.col = "white",
border.alpha = 0.2,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_legend(show=FALSE)
legend3 <- tm_shape(finallondonboroughcalculated) +
tm_polygons("sumMtCO2",
palette="BuPu",
midpoint=NA,
popup.vars=c("LB_GSS_CD", "sumMtCO2"),
title="Percentage") +
tm_layout(legend.only = TRUE, legend.position=c(0.2,0.25),asp=0.1)+
tm_compass(north=0, position=c(0.65,0.6))
t3=tmap_arrange(tm3, legend3)
t3
tmap_save(t3, 'CO2NEW.png')
save.image("C:/Users/erisf/OneDrive - University College London/CASA/Modules/GIS/GIS Coursework/R studio/Coursework/Gis-Coursework/RData.RData")
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
plot(pressure)
library(tmaptools)
```{r cars}
#london boroughs and wards datasets
londonwards <- st_read(here("data","raw", "London_Ward.shp"))
library(raster)
library(rgdal)
library(rgeos)
library(ggplot2)
library(dplyr)
library(sf)
library(here)
library(tidyverse)
library(spatstat)
library(sp)
library(rgeos)
library(maptools)
library(GISTools)
library(tmap)
library(geojson)
library(geojsonio)
library(tmaptools)
londonwards <- st_read(here("data","raw", "London_Ward.shp"))
londonboroughs <- st_read(here("data","raw", "London_Borough_Excluding_MHW.shp"))
rooftoplondon <- st_read(here("data","qgisprocessed", "londonpvstatistics.gpkg"))
rooftoplondon <- rooftoplondon %>%
replace(is.na(.), 0)
rooftoplondon <- st_read(here("data","qgisprocessed", "londonpvstatistics.gpkg"))
rooftoplondon$pvarea <- rooftoplondon$X1..SUM.+ rooftoplondon$X2..SUM.+rooftoplondon$X3..SUM+rooftoplondon$X4..SUM.+rooftoplondon$X5..SUM.+
rooftoplondon$X6..SUM.+rooftoplondon$X7..SUM.+rooftoplondon$X8..SUM.+rooftoplondon$X9..SUM.+rooftoplondon$X11..SUM.
#calculating total rooftop area of each building
rooftoplondon$area <- st_area(rooftoplondon)
#Transforming to integer
rooftoplondon$area <- gsub("C([0-9]+)_.*", "\\1", rooftoplondon$area)%>%
as.integer(rooftoplondon$area)
ratio <- sum(rooftoplondon$pvarea)/sum(rooftoplondon$area[rooftoplondon$pvarea!=0])
#General ratio is 0.70
rooftoplondon <- rooftoplondon %>%
mutate(pvareanew = ifelse(pvarea == 0,lapply(area*ratio, as.integer),pvarea))
#calculating total rooftop area of each building
ratio <- sum(rooftoplondon$pvarea)/sum(rooftoplondon$area[rooftoplondon$pvarea!=0])
rooftoplondon$area <- st_area(rooftoplondon)
#Transforming to integer
rooftoplondon$area <- gsub("C([0-9]+)_.*", "\\1", rooftoplondon$area)%>%
as.integer(rooftoplondon$area)
#calculating total rooftop area of each building
ratio <- sum(rooftoplondon$pvarea)/sum(rooftoplondon$area[rooftoplondon$pvarea!=0])
